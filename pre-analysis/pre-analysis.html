<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Roman Shrestha">
<meta name="dcterms.date" content="2022-11-21">

<title>Preliminary Analysis: Relationship between Income, Education Level and Capital Gain</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="pre-analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="pre-analysis_files/libs/quarto-html/quarto.js"></script>
<script src="pre-analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="pre-analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="pre-analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="pre-analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="pre-analysis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="pre-analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="pre-analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="pre-analysis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Preliminary Analysis: Relationship between Income, Education Level and Capital Gain</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Roman Shrestha </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 21, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="preliminary-analysis" class="level2">
<h2 class="anchored" data-anchor-id="preliminary-analysis"><strong>Preliminary Analysis</strong></h2>
<section id="data-and-hypotheses" class="level4">
<h4 class="anchored" data-anchor-id="data-and-hypotheses"><strong>Data and Hypotheses</strong></h4>
<p>This research seeks to investigate the relationship between a person’s income and their educational background, and capital gain (the profits that are realized by selling an investment, such as stocks, bonds, or real estate). Our hypothesis is that as the education level and capital gain of a person increases, their income will also increase. Our outcome variable is income and the key explanatory variables are educational level and capital gain. The data we use for this project consists of 51 state samples, 32561 data set instances, and contains 15 attributes, which include a person’s education level, race, capital gain and other relevant information.</p>
</section>
<section id="load-packages" class="level4">
<h4 class="anchored" data-anchor-id="load-packages"><strong>Load Packages</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co">#loads packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggforce)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glmnet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-data" class="level4">
<h4 class="anchored" data-anchor-id="load-data"><strong>Load Data</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/adultdata.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) <span class="co">#loads csv file</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-wrangling" class="level4">
<h4 class="anchored" data-anchor-id="data-wrangling"><strong>Data Wrangling</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"age"</span>, <span class="st">"workclass"</span>, <span class="st">"fnlwgt"</span>, <span class="st">"education"</span>, <span class="st">"education_num"</span>, <span class="st">"marital_status"</span>, <span class="st">"occupation"</span>, <span class="st">"relationship"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span>, <span class="st">"capital_gain"</span>, <span class="st">"capital_loss"</span>, <span class="st">"hours_per_week"</span>, <span class="st">"native_country"</span>, <span class="st">"income"</span>) <span class="co">#rename columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">education =</span> <span class="fu">case_when</span>( <span class="co">#</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    education <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Preschool"</span>, <span class="st">"1st-4th"</span>, <span class="st">"5th-6th"</span>, <span class="st">"7th-8th"</span>) <span class="sc">~</span> <span class="st">"some_primary_middle_school"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    education <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"9th"</span>, <span class="st">"10th"</span>, <span class="st">"11th"</span>, <span class="st">"12th"</span>) <span class="sc">~</span> <span class="st">"some-hs-school"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    education <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Assoc-acdm"</span>, <span class="st">"Assoc-voc"</span>) <span class="sc">~</span> <span class="st">"associate"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    education <span class="sc">==</span> <span class="st">"HS-grad"</span> <span class="sc">~</span> <span class="st">"high-school-grad"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    education <span class="sc">==</span> <span class="st">"Some-college"</span> <span class="sc">~</span> <span class="st">"some-college"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    education <span class="sc">==</span> <span class="st">"Bachelors"</span> <span class="sc">~</span> <span class="st">"bachelors"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    education <span class="sc">==</span> <span class="st">"Masters"</span> <span class="sc">~</span> <span class="st">"masters"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    education <span class="sc">==</span> <span class="st">"Doctorate"</span> <span class="sc">~</span> <span class="st">"doctorate"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    education <span class="sc">==</span> <span class="st">"Prof-school"</span> <span class="sc">~</span> <span class="st">"prof-school"</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="co">#recateogrizes education variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>edu_fct <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"some_primary_middle_school"</span>, <span class="st">"some-hs-school"</span>, <span class="st">"high-school-grad"</span>, <span class="st">"some-college"</span>,<span class="st">"associate"</span>, <span class="st">"bachelors"</span>, <span class="st">"masters"</span>, <span class="st">"prof-school"</span>, <span class="st">"doctorate"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">education =</span> <span class="fu">factor</span>(education, <span class="at">levels =</span> edu_fct)) <span class="co">#creates factor levels for education variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income_bin =</span> <span class="fu">if_else</span>(income<span class="sc">==</span><span class="st">"&gt;50K"</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="co">#creates a binary income variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">income =</span> <span class="fu">factor</span>(income, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"&lt;=50K"</span>, <span class="st">"&gt;50K"</span>))) <span class="co">#creates factor for income variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="in-depth-explanation-of-variables" class="level4">
<h4 class="anchored" data-anchor-id="in-depth-explanation-of-variables"><strong>In-Depth Explanation of Variables</strong></h4>
<ul>
<li>What data wrangling have you done? Have you changed any of the variables in the original data set?</li>
</ul>
<p>We have changed the names of the columns so that it is easier to read and do analysis on. We have also mutated the <code>education</code> variable, categorizing the education level into a smaller category so that it is easier to interpret the analysis and graphs. We have also created a factor for <code>education</code> variable in order of the level of education so that we can see clear patterns in graphs during our analysis. Likewise, for our outcome variable, we have created a binary outcome variable <code>income_bin</code> to fit our linear regression model. Also, we have created a factor for the <code>income</code> variable to fit a logistic regression model.</p>
<ul>
<li>What data tidying have you had to do?</li>
</ul>
<p>The data set we used for our analysis is pretty tidied by default. There are a few N/A data in some rows but since it doesn’t interfere much with our analysis, we have ignored those N/A values during our analysis.</p>
<ul>
<li>What variables will you include as controls?<br>
</li>
</ul>
<p>We will include marital status, occupation, race, sex and native country as control variables.&nbsp;</p>
<ul>
<li>What confounding factors do these help you account for?</li>
</ul>
<p>These variables help us to account for income changes based on person’s marital status, the kind of work they do, their race, their sex and their country of origin.</p>
<p>After proper data wrangling and setting up control variables, the variables that we’ll be using in our analysis are education, number of years of education and capital gain. <code>education</code> is a categorical ordinal variable which describes the highest level of education achieved by an individual. The categories of this variable are some_primary_middle_school, some-hs-school, high-school-grad, some-college, associate, bachelors, masters, prof-school, and doctorate. Our second variable is <code>num_education</code>, a numerical continuous variable which indicates the highest level of education achieved in numerical form. Our third variable <code>capital_gain</code> is a numerical continuous variable. It indicates the capital gained by a person in a single year. Our final variable, which is also our explanatory variable, is <code>income</code>. We also have a binary variable for income <code>income_bin</code>. It is a categorical ordinal variable which indicates whether the person’s income is higher or lower than $50,000 per year.</p>
</section>
<section id="descriptive-visualization" class="level4">
<h4 class="anchored" data-anchor-id="descriptive-visualization"><strong>Descriptive visualization</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> education_num, <span class="at">fill =</span> income)) <span class="sc">+</span> <span class="co">#maps the plot</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span> <span class="co">#creates density plot</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Education years"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Income"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Education years vs Income level"</span>) <span class="sc">+</span><span class="co">#labels the plot</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="pre-analysis_files/figure-html/education-income-density-plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The plot above supports our hypothesis because people who have more years in education usually have a higher level of income. The people who have an income level of over $50k have had an education ranging from 8 to 18 years, with most of them having around 13 years of education. As for low income people, their education level ranges from 0 years to 15 years with most having around 9 years.&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(capital_gain<span class="sc">&lt;</span><span class="dv">17000</span>) <span class="sc">%&gt;%</span> <span class="co">#filters for outliers</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> capital_gain, <span class="at">fill =</span> income)) <span class="sc">+</span> <span class="co">#maps the plot</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span> <span class="co">#plots density plot</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Capital gain"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Income"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Capital gain vs Income level"</span>) <span class="sc">+</span><span class="co">#labels the plot</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="pre-analysis_files/figure-html/capitalgain-income-density-plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see from the graph that the capital gain for higher income level is more right skewed as compared to the capital gain for lower income level. This plot supports our hypothesis because we can see that the vast majority of people who have a capital gain amount lower than $500 are also the ones who make less than $50k a year, and those who have a capital gain ranging from $500 all the way up to over $15000 are the ones making over $50k a year.&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> education,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> income)) <span class="sc">+</span> <span class="co">#maps axes</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Education Level"</span>, <span class="at">y =</span> <span class="cn">NULL</span>, <span class="at">fill =</span> <span class="st">"Income"</span> , <span class="at">title =</span> <span class="st">"Proportions for Income Level by Education Level"</span>) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="pre-analysis_files/figure-html/education-income-bar-plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This plot also supports our hypothesis because we can see that the proportions of those who make over 50k are higher when a person’s level of education is also higher. To be more specific, those who received a doctorate or professional school degree tend to have the highest proportion of income over 50k, and those who received primary to middle school and some high-school education tend to have the lowest proportion of income over 50k.&nbsp;</p>
</section>
<section id="preliminary-linear-regression-models" class="level4">
<h4 class="anchored" data-anchor-id="preliminary-linear-regression-models"><strong>Preliminary linear regression models</strong></h4>
<p>Fit at most two linear models that help you test your hypotheses (you can include more in the final project and written report). Report the coefficients in a table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span> <span class="co">#specifies linear model  </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="sc">%&gt;%</span> <span class="co">#lm: linear model</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(income_bin <span class="sc">~</span> education, <span class="at">data =</span> df) <span class="sc">%&gt;%</span> <span class="co">#fits model and estimates parameters</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>() <span class="co">#gives tidy output</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 5
  term                      estimate std.error statistic   p.value
  &lt;chr&gt;                        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)                0.0518     0.0115     4.51  6.62e-  6
2 educationsome-hs-school    0.00782    0.0136     0.577 5.64e-  1
3 educationhigh-school-grad  0.108      0.0121     8.89  6.46e- 19
4 educationsome-college      0.138      0.0124    11.2   6.11e- 29
5 educationassociate         0.204      0.0140    14.5   8.74e- 48
6 educationbachelors         0.363      0.0127    28.6   1.96e-177
7 educationmasters           0.505      0.0150    33.8   1.31e-245
8 educationprof-school       0.683      0.0202    33.9   3.80e-247
9 educationdoctorate         0.689      0.0227    30.4   5.70e-200</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logistic_reg</span>() <span class="sc">%&gt;%</span> <span class="co">#specifies logistic regression model</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">set_engine</span>(<span class="st">"glm"</span>) <span class="sc">%&gt;%</span> <span class="co">#sets the engine</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">set_mode</span>(<span class="st">"classification"</span>) <span class="sc">%&gt;%</span> <span class="co">#set the mode</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">fit</span>(income<span class="sc">~</span>capital_gain, <span class="at">data =</span> df) <span class="sc">%&gt;%</span> <span class="co">#fits the model</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term         estimate  std.error statistic p.value
  &lt;chr&gt;           &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1 (Intercept)     0.252 0.0143         -96.5       0
2 capital_gain    1.00  0.00000863      38.9       0</code></pre>
</div>
</div>
</section>
<section id="preliminary-conclusion" class="level4">
<h4 class="anchored" data-anchor-id="preliminary-conclusion"><strong>Preliminary conclusion</strong></h4>
<p>The preliminary analysis supports our hypothesis that as the education level and capital gain of a person increases, their income will also increase. To be more specific, our first plot indicates that the number of years of education a person received has a positive relationship with the person’s income level, and our second plot shows that people’s capital gain also tend to correspond to their income level, with those who have less than 500 tend to make less than 50k a year, and those who have more than 500 capital gain tend to make more than 50k a year. The expectations have been met in the preliminary analysis.&nbsp;</p>
<p>From our binary linear regression model, we see that higher the education level is, higher is the probability of the person to fall in higher income group. Likewise, from the logistic regression model, we see that the odds ratio (the ratio of the probability of an event occurring to the event not occurring) of person being in higher income group is significantly higher when the person has a capital gain.</p>
<p>Overall, by using the observations from the three plots and the two regression models, we can say that higher level and more number of years of education and higher capital gain leads to having higher income level and vice versa.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>